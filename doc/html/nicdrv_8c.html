<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>SOEM: nicdrv.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.3 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">SOEM&#160;<span id="projectnumber">v1.2.5</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Defines</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<h1>nicdrv.c File Reference</h1>  </div>
</div>
<div class="contents">

<p>EtherCAT RAW socket driver.  
<a href="#_details">More...</a></p>
<div class="textblock"><code>#include &lt;sys/types.h&gt;</code><br/>
<code>#include &lt;sys/ioctl.h&gt;</code><br/>
<code>#include &lt;net/if.h&gt;</code><br/>
<code>#include &lt;sys/socket.h&gt;</code><br/>
<code>#include &lt;unistd.h&gt;</code><br/>
<code>#include &lt;sys/time.h&gt;</code><br/>
<code>#include &lt;arpa/inet.h&gt;</code><br/>
<code>#include &lt;stdio.h&gt;</code><br/>
<code>#include &lt;fcntl.h&gt;</code><br/>
<code>#include &lt;string.h&gt;</code><br/>
<code>#include &lt;netpacket/packet.h&gt;</code><br/>
<code>#include &lt;pthread.h&gt;</code><br/>
<code>#include &quot;<a class="el" href="ethercattype_8h.html">ethercattype.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="nicdrv_8h.html">nicdrv.h</a>&quot;</code><br/>
</div><table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structec__stackT.html">ec_stackT</a></td></tr>
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nicdrv_8c.html#a7a44833515702c9d106ba9bfd5478e5e">RX_PRIM</a>&#160;&#160;&#160;<a class="el" href="nicdrv_8h.html#ad64f7787490ee767f77ad78021dd6bbd">priMAC</a>[1]</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nicdrv_8c.html#a84a8ffdac4ca1a8c8533068ded9b60d6">RX_SEC</a>&#160;&#160;&#160;<a class="el" href="nicdrv_8h.html#a1a8704686fbf15b235836459e6d82ebe">secMAC</a>[1]</td></tr>
<tr><td colspan="2"><h2><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom">{ <a class="el" href="nicdrv_8c.html#ae4d5251432e1a9e6803c0240cc492e18a0d44586b1656ecf4ee49711b925d5351">ECT_RED_NONE</a>, 
<a class="el" href="nicdrv_8c.html#ae4d5251432e1a9e6803c0240cc492e18a668b515c7179fcc99ea8cfd7a63c63de">ECT_RED_DOUBLE</a>
 }</td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nicdrv_8c.html#a5b5e0bf5e801e9f30a0fcd9b50b3efc5">ec_setupnic</a> (const char *ifname, int secondary)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nicdrv_8c.html#ab023ae467cce8a520a2554f74415f2ef">ec_closenic</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nicdrv_8c.html#a495531bac8f5d70b5a10494048b15820">ec_setupheader</a> (void *p)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="ethercattype_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nicdrv_8c.html#ae3520c51670d8e4e3e360f26fd8acee4">ec_getindex</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nicdrv_8c.html#a121be26fdb9da9ef5b9f217fdcd2d50f">ec_setbufstat</a> (<a class="el" href="ethercattype_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> idx, int bufstat)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nicdrv_8c.html#ace7534023c2df9a309fc51a5e7fd6d94">ec_outframe</a> (<a class="el" href="ethercattype_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> idx, int stacknumber)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nicdrv_8c.html#afb39cbe067b1afa202e8c487a33c4d66">ec_outframe_red</a> (<a class="el" href="ethercattype_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> idx)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nicdrv_8c.html#a2e68d2cad9498974559c42e59a2d30a4">ec_recvpkt</a> (int stacknumber)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nicdrv_8c.html#abd3768eada1dfa0e29e259c8219c6c5f">ec_inframe</a> (<a class="el" href="ethercattype_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> idx, int stacknumber)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nicdrv_8c.html#aac117fb68b4ac5cbb5c1648a1813e870">ec_waitinframe_red</a> (<a class="el" href="ethercattype_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> idx, struct timeval tvs)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nicdrv_8c.html#a3bcbccf53a33907e16fa67c8e5b45d40">ec_waitinframe</a> (<a class="el" href="ethercattype_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> idx, int timeout)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nicdrv_8c.html#ae49716ef495b23fc91261396fb2f49ec">ec_srconfirm</a> (<a class="el" href="ethercattype_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> idx, int timeout)</td></tr>
<tr><td colspan="2"><h2><a name="var-members"></a>
Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="ethercattype_8h.html#a3a6f74b41ef7a243086b15cd91c05f69">ec_bufT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nicdrv_8c.html#aee8e5ba09644b6afe45d29196bb35684">ec_rxbuf</a> [EC_MAXBUF]</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nicdrv_8c.html#a42ace7330d26f97d4eac5ffed885127f">ec_rxbufstat</a> [EC_MAXBUF]</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nicdrv_8c.html#aa19c3326de729620b6da8d5870a37992">ec_rxsa</a> [EC_MAXBUF]</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="ethercattype_8h.html#a3a6f74b41ef7a243086b15cd91c05f69">ec_bufT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nicdrv_8c.html#aac56fd6b961ca36b347ef63f514d11f7">ec_tempinbuf</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nicdrv_8c.html#a09b0c22126275c5459652b655ae6804f">ec_tempinbufs</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="ethercattype_8h.html#a3a6f74b41ef7a243086b15cd91c05f69">ec_bufT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nicdrv_8c.html#aefb9ae23af333e3e959b863ae32d0ac0">ec_rxbuf2</a> [EC_MAXBUF]</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nicdrv_8c.html#a3ae218506478dba61a06c5cf8ee21dd2">ec_rxbufstat2</a> [EC_MAXBUF]</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nicdrv_8c.html#a1453d31876c5b02ceda316068951e104">ec_rxsa2</a> [EC_MAXBUF]</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="ethercattype_8h.html#a3a6f74b41ef7a243086b15cd91c05f69">ec_bufT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nicdrv_8c.html#aa6cdab5fca8a7ea6ad85b55f2b9d46d8">ec_tempinbuf2</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="ethercattype_8h.html#a3a6f74b41ef7a243086b15cd91c05f69">ec_bufT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nicdrv_8c.html#ad4c92ed6fc9b6c95768da08f36cbc14d">ec_txbuf</a> [EC_MAXBUF]</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nicdrv_8c.html#aaf1d250c85c451800940716aded3296e">ec_txbuflength</a> [EC_MAXBUF]</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="ethercattype_8h.html#a3a6f74b41ef7a243086b15cd91c05f69">ec_bufT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nicdrv_8c.html#a041f8a9db37041e44f598beb671415cd">ec_txbuf2</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nicdrv_8c.html#a3ef78e050890fa525fd62c00b7bf4e7b">ec_txbuflength2</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nicdrv_8c.html#a97f56dc60b8e1cacda490bb696c69599">sockhandle</a> = -1</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nicdrv_8c.html#ad1438f8ed914dda0ad960f46568e1d31">sockhandle2</a> = -1</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="structec__stackT.html">ec_stackT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nicdrv_8c.html#add617d38a65ebca026aa264f9ed3e72b">ec_stack</a> [2]</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="ethercattype_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nicdrv_8c.html#ae171ee579756908ebd358bacf6e13b71">ec_lastidx</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nicdrv_8c.html#aaeff8879a25a3d5a92db3c506a0aaf01">ec_incnt</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nicdrv_8c.html#adf1d3f16adb608dad43fcd5f1c83f603">ec_errcnt</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nicdrv_8c.html#ab7064cc03fe8cba363a8876ced93810b">ec_redstate</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nicdrv_8c.html#ad7063eb4d29a8653fe75bb8662849e35">hlp_txtime</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nicdrv_8c.html#a4d3e965b1b72e65dd14f6ac9b745433b">hlp_rxtime</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="ethercattype_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nicdrv_8c.html#ad64f7787490ee767f77ad78021dd6bbd">priMAC</a> [3] = { 0x0101, 0x0101, 0x0101 }</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="ethercattype_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nicdrv_8c.html#a1a8704686fbf15b235836459e6d82ebe">secMAC</a> [3] = { 0x0404, 0x0404, 0x0404 }</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">pthread_mutex_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nicdrv_8c.html#aa404a1cda6f1249b72373289a165fea8">ec_getindex_mutex</a> = PTHREAD_MUTEX_INITIALIZER</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">pthread_mutex_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nicdrv_8c.html#abdddc9e77d65cb9d8839898018c1188f">ec_tx_mutex</a> = PTHREAD_MUTEX_INITIALIZER</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">pthread_mutex_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="nicdrv_8c.html#aeb6f80e9bafa402541520f7e8186d8da">ec_rx_mutex</a> = PTHREAD_MUTEX_INITIALIZER</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>EtherCAT RAW socket driver. </p>
<p>Low level interface functions to send and receive EtherCAT packets. EtherCAT has the property that packets are only send by the master, and the send packets allways return in the receive buffer. There can be multiple packets "on the wire" before they return. To combine the received packets with the original send packets a buffer system is installed. The identifier is put in the index item of the EtherCAT header. The index is stored and compared when a frame is recieved. If there is a match the packet can be combined with the transmit packet and returned to the higher level function.</p>
<p>The socket layer can exhibit a reversal in the packet order (rare). If the Tx order is A-B-C the return order could be A-C-B. The indexed buffer will reorder the packets automatically.</p>
<p>The "redundant" option will configure two sockets and two NIC interfaces. Slaves are connected to both interfaces, one on the IN port and one on the OUT port. Packets are send via both interfaces. Any one of the connections (also an interconnect) can be removed and the slaves are still serviced with packets. The software layer will detect the possible failure modes and compensate. If needed the packets from interface A are resend through interface B. This layer if fully transparent for the higher layers. </p>
</div><hr/><h2>Define Documentation</h2>
<a class="anchor" id="a7a44833515702c9d106ba9bfd5478e5e"></a><!-- doxytag: member="nicdrv.c::RX_PRIM" ref="a7a44833515702c9d106ba9bfd5478e5e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RX_PRIM&#160;&#160;&#160;<a class="el" href="nicdrv_8h.html#ad64f7787490ee767f77ad78021dd6bbd">priMAC</a>[1]</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>second MAC word is used for identification </p>

</div>
</div>
<a class="anchor" id="a84a8ffdac4ca1a8c8533068ded9b60d6"></a><!-- doxytag: member="nicdrv.c::RX_SEC" ref="a84a8ffdac4ca1a8c8533068ded9b60d6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RX_SEC&#160;&#160;&#160;<a class="el" href="nicdrv_8h.html#a1a8704686fbf15b235836459e6d82ebe">secMAC</a>[1]</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>second MAC word is used for identification </p>

</div>
</div>
<hr/><h2>Enumeration Type Documentation</h2>
<a class="anchor" id="ae4d5251432e1a9e6803c0240cc492e18"></a><!-- doxytag: member="nicdrv.c::@25" ref="ae4d5251432e1a9e6803c0240cc492e18" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Redundancy modes </p>
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="ae4d5251432e1a9e6803c0240cc492e18a0d44586b1656ecf4ee49711b925d5351"></a><!-- doxytag: member="ECT_RED_NONE" ref="ae4d5251432e1a9e6803c0240cc492e18a0d44586b1656ecf4ee49711b925d5351" args="" -->ECT_RED_NONE</em>&nbsp;</td><td>
<p>No redundancy, single NIC mode </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ae4d5251432e1a9e6803c0240cc492e18a668b515c7179fcc99ea8cfd7a63c63de"></a><!-- doxytag: member="ECT_RED_DOUBLE" ref="ae4d5251432e1a9e6803c0240cc492e18a668b515c7179fcc99ea8cfd7a63c63de" args="" -->ECT_RED_DOUBLE</em>&nbsp;</td><td>
<p>Double redundant NIC connecetion </p>
</td></tr>
</table>
</dd>
</dl>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ab023ae467cce8a520a2554f74415f2ef"></a><!-- doxytag: member="nicdrv.c::ec_closenic" ref="ab023ae467cce8a520a2554f74415f2ef" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ec_closenic </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Close sockets used </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 </dd></dl>

</div>
</div>
<a class="anchor" id="ae3520c51670d8e4e3e360f26fd8acee4"></a><!-- doxytag: member="nicdrv.c::ec_getindex" ref="ae3520c51670d8e4e3e360f26fd8acee4" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ethercattype_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> ec_getindex </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Get new frame identifier index and allocate corresponding rx buffer. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>new index. </dd></dl>

</div>
</div>
<a class="anchor" id="abd3768eada1dfa0e29e259c8219c6c5f"></a><!-- doxytag: member="nicdrv.c::ec_inframe" ref="abd3768eada1dfa0e29e259c8219c6c5f" args="(uint8 idx, int stacknumber)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ec_inframe </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ethercattype_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>stacknumber</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Non blocking receive frame function. Uses RX buffer and index to combine read frame with transmitted frame. To compensate for received frames that are out-of-order all frames are stored in their respective indexed buffer. If a frame was placed in the buffer previously, the function retreives it from that buffer index without calling ec_recvpkt. If the requested index is not already in the buffer it calls ec_recvpkt to fetch it. There are three options now, 1 no frame read, so exit. 2 frame read but other than requested index, store in buffer and exit. 3 frame read with matching index, store in buffer, set completed flag in buffer status and exit.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">idx</td><td>= requested index of frame </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">stacknumber</td><td>= 0=primary 1=secondary stack </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Workcounter if a frame is found with corresponding index, otherwise EC_NOFRAME or EC_OTHERFRAME. </dd></dl>

</div>
</div>
<a class="anchor" id="ace7534023c2df9a309fc51a5e7fd6d94"></a><!-- doxytag: member="nicdrv.c::ec_outframe" ref="ace7534023c2df9a309fc51a5e7fd6d94" args="(uint8 idx, int stacknumber)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ec_outframe </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ethercattype_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>stacknumber</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Transmit buffer over socket (non blocking). </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">idx</td><td>= index in tx buffer array </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">stacknumber</td><td>= 0=Primary 1=Secondary stack </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>socket send result </dd></dl>

</div>
</div>
<a class="anchor" id="afb39cbe067b1afa202e8c487a33c4d66"></a><!-- doxytag: member="nicdrv.c::ec_outframe_red" ref="afb39cbe067b1afa202e8c487a33c4d66" args="(uint8 idx)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ec_outframe_red </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ethercattype_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>idx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Transmit buffer over socket (non blocking). </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">idx</td><td>= index in tx buffer array </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>socket send result </dd></dl>

</div>
</div>
<a class="anchor" id="a2e68d2cad9498974559c42e59a2d30a4"></a><!-- doxytag: member="nicdrv.c::ec_recvpkt" ref="a2e68d2cad9498974559c42e59a2d30a4" args="(int stacknumber)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ec_recvpkt </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>stacknumber</em></td><td>)</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Non blocking read of socket. Put frame in temporary buffer. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">stacknumber</td><td>= 0=primary 1=secondary stack </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>&gt;0 if frame is available and read </dd></dl>

</div>
</div>
<a class="anchor" id="a121be26fdb9da9ef5b9f217fdcd2d50f"></a><!-- doxytag: member="nicdrv.c::ec_setbufstat" ref="a121be26fdb9da9ef5b9f217fdcd2d50f" args="(uint8 idx, int bufstat)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ec_setbufstat </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ethercattype_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>bufstat</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Set rx buffer status. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">idx</td><td>= index in buffer array </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">bufstat</td><td>= status to set </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a495531bac8f5d70b5a10494048b15820"></a><!-- doxytag: member="nicdrv.c::ec_setupheader" ref="a495531bac8f5d70b5a10494048b15820" args="(void *p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ec_setupheader </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Fill buffer with ethernet header structure. Destination MAC is allways broadcast. Ethertype is allways ETH_P_ECAT. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">p</td><td>= buffer </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a5b5e0bf5e801e9f30a0fcd9b50b3efc5"></a><!-- doxytag: member="nicdrv.c::ec_setupnic" ref="a5b5e0bf5e801e9f30a0fcd9b50b3efc5" args="(const char *ifname, int secondary)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ec_setupnic </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>ifname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>secondary</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Basic setup to connect NIC to socket. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ifname</td><td>= Name of NIC device, f.e. "eth0" </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">secondary</td><td>= if &gt;0 then use secondary stack instead of primary </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>&gt;0 if succeeded </dd></dl>

</div>
</div>
<a class="anchor" id="ae49716ef495b23fc91261396fb2f49ec"></a><!-- doxytag: member="nicdrv.c::ec_srconfirm" ref="ae49716ef495b23fc91261396fb2f49ec" args="(uint8 idx, int timeout)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ec_srconfirm </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ethercattype_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Blocking send and recieve frame function. Used for non processdata frames. A datagram is build into a frame and transmitted via this function. It waits for an answer and returns the workcounter. The function retries if time is left and the result is WKC=0 or no frame received.</p>
<p>The function calls <a class="el" href="nicdrv_8c.html#afb39cbe067b1afa202e8c487a33c4d66">ec_outframe_red()</a> and <a class="el" href="nicdrv_8c.html#aac117fb68b4ac5cbb5c1648a1813e870">ec_waitinframe_red()</a>.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">idx</td><td>= index of frame </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">timeout</td><td>= timeout in us </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Workcounter or EC_NOFRAME </dd></dl>

</div>
</div>
<a class="anchor" id="a3bcbccf53a33907e16fa67c8e5b45d40"></a><!-- doxytag: member="nicdrv.c::ec_waitinframe" ref="a3bcbccf53a33907e16fa67c8e5b45d40" args="(uint8 idx, int timeout)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ec_waitinframe </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ethercattype_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Blocking receive frame function. Calls <a class="el" href="nicdrv_8c.html#aac117fb68b4ac5cbb5c1648a1813e870">ec_waitinframe_red()</a>. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">idx</td><td>= requested index of frame </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">timeout</td><td>= timeout in us </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Workcounter if a frame is found with corresponding index, otherwise EC_NOFRAME. </dd></dl>

</div>
</div>
<a class="anchor" id="aac117fb68b4ac5cbb5c1648a1813e870"></a><!-- doxytag: member="nicdrv.c::ec_waitinframe_red" ref="aac117fb68b4ac5cbb5c1648a1813e870" args="(uint8 idx, struct timeval tvs)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int ec_waitinframe_red </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ethercattype_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a>&#160;</td>
          <td class="paramname"><em>idx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct timeval&#160;</td>
          <td class="paramname"><em>tvs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Blocking redundant receive frame function. If redundant mode is not active then it skips the secondary stack and redundancy functions. In redundant mode it waits for both (primary and secondary) frames to come in. The result goes in an decision tree that decides, depending on the route of the packet and its possible missing arrival, how to reroute the original packet to get the data in an other try.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">idx</td><td>= requested index of frame </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">tvs</td><td>= timeout </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Workcounter if a frame is found with corresponding index, otherwise EC_NOFRAME. </dd></dl>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="adf1d3f16adb608dad43fcd5f1c83f603"></a><!-- doxytag: member="nicdrv.c::ec_errcnt" ref="adf1d3f16adb608dad43fcd5f1c83f603" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="nicdrv_8h.html#adf1d3f16adb608dad43fcd5f1c83f603">ec_errcnt</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>global error packet counter, ie non EtherCAT packets </p>

</div>
</div>
<a class="anchor" id="aa404a1cda6f1249b72373289a165fea8"></a><!-- doxytag: member="nicdrv.c::ec_getindex_mutex" ref="aa404a1cda6f1249b72373289a165fea8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pthread_mutex_t <a class="el" href="nicdrv_8c.html#aa404a1cda6f1249b72373289a165fea8">ec_getindex_mutex</a> = PTHREAD_MUTEX_INITIALIZER</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="aaeff8879a25a3d5a92db3c506a0aaf01"></a><!-- doxytag: member="nicdrv.c::ec_incnt" ref="aaeff8879a25a3d5a92db3c506a0aaf01" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="nicdrv_8h.html#aaeff8879a25a3d5a92db3c506a0aaf01">ec_incnt</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>global rx packet counter, counts only EtherCAT packets </p>

</div>
</div>
<a class="anchor" id="ae171ee579756908ebd358bacf6e13b71"></a><!-- doxytag: member="nicdrv.c::ec_lastidx" ref="ae171ee579756908ebd358bacf6e13b71" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ethercattype_8h.html#adde6aaee8457bee49c2a92621fe22b79">uint8</a> <a class="el" href="nicdrv_8c.html#ae171ee579756908ebd358bacf6e13b71">ec_lastidx</a><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>last used frame index </p>

</div>
</div>
<a class="anchor" id="ab7064cc03fe8cba363a8876ced93810b"></a><!-- doxytag: member="nicdrv.c::ec_redstate" ref="ab7064cc03fe8cba363a8876ced93810b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="nicdrv_8h.html#ab7064cc03fe8cba363a8876ced93810b">ec_redstate</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>current redundancy state </p>

</div>
</div>
<a class="anchor" id="aeb6f80e9bafa402541520f7e8186d8da"></a><!-- doxytag: member="nicdrv.c::ec_rx_mutex" ref="aeb6f80e9bafa402541520f7e8186d8da" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pthread_mutex_t <a class="el" href="nicdrv_8c.html#aeb6f80e9bafa402541520f7e8186d8da">ec_rx_mutex</a> = PTHREAD_MUTEX_INITIALIZER</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="aee8e5ba09644b6afe45d29196bb35684"></a><!-- doxytag: member="nicdrv.c::ec_rxbuf" ref="aee8e5ba09644b6afe45d29196bb35684" args="[EC_MAXBUF]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ethercattype_8h.html#a3a6f74b41ef7a243086b15cd91c05f69">ec_bufT</a> <a class="el" href="nicdrv_8h.html#aee8e5ba09644b6afe45d29196bb35684">ec_rxbuf</a>[EC_MAXBUF]</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>primary rx buffers </p>

</div>
</div>
<a class="anchor" id="aefb9ae23af333e3e959b863ae32d0ac0"></a><!-- doxytag: member="nicdrv.c::ec_rxbuf2" ref="aefb9ae23af333e3e959b863ae32d0ac0" args="[EC_MAXBUF]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ethercattype_8h.html#a3a6f74b41ef7a243086b15cd91c05f69">ec_bufT</a> <a class="el" href="nicdrv_8c.html#aefb9ae23af333e3e959b863ae32d0ac0">ec_rxbuf2</a>[EC_MAXBUF]<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>secondary rx buffers </p>

</div>
</div>
<a class="anchor" id="a42ace7330d26f97d4eac5ffed885127f"></a><!-- doxytag: member="nicdrv.c::ec_rxbufstat" ref="a42ace7330d26f97d4eac5ffed885127f" args="[EC_MAXBUF]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="nicdrv_8c.html#a42ace7330d26f97d4eac5ffed885127f">ec_rxbufstat</a>[EC_MAXBUF]</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>primary rx buffer status </p>

</div>
</div>
<a class="anchor" id="a3ae218506478dba61a06c5cf8ee21dd2"></a><!-- doxytag: member="nicdrv.c::ec_rxbufstat2" ref="a3ae218506478dba61a06c5cf8ee21dd2" args="[EC_MAXBUF]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="nicdrv_8c.html#a3ae218506478dba61a06c5cf8ee21dd2">ec_rxbufstat2</a>[EC_MAXBUF]<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>secondary rx buffer status </p>

</div>
</div>
<a class="anchor" id="aa19c3326de729620b6da8d5870a37992"></a><!-- doxytag: member="nicdrv.c::ec_rxsa" ref="aa19c3326de729620b6da8d5870a37992" args="[EC_MAXBUF]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="nicdrv_8c.html#aa19c3326de729620b6da8d5870a37992">ec_rxsa</a>[EC_MAXBUF]<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>primary rx MAC source address </p>

</div>
</div>
<a class="anchor" id="a1453d31876c5b02ceda316068951e104"></a><!-- doxytag: member="nicdrv.c::ec_rxsa2" ref="a1453d31876c5b02ceda316068951e104" args="[EC_MAXBUF]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="nicdrv_8c.html#a1453d31876c5b02ceda316068951e104">ec_rxsa2</a>[EC_MAXBUF]<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>secondary rx MAC source address </p>

</div>
</div>
<a class="anchor" id="add617d38a65ebca026aa264f9ed3e72b"></a><!-- doxytag: member="nicdrv.c::ec_stack" ref="add617d38a65ebca026aa264f9ed3e72b" args="[2]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structec__stackT.html">ec_stackT</a> <a class="el" href="nicdrv_8c.html#add617d38a65ebca026aa264f9ed3e72b">ec_stack</a>[2]<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment"> 
                {{&amp;<a class="code" href="nicdrv_8c.html#a97f56dc60b8e1cacda490bb696c69599">sockhandle</a>, &amp;<a class="code" href="nicdrv_8c.html#ad4c92ed6fc9b6c95768da08f36cbc14d">ec_txbuf</a>, &amp;<a class="code" href="nicdrv_8c.html#aaf1d250c85c451800940716aded3296e">ec_txbuflength</a>, &amp;<a class="code" href="nicdrv_8c.html#aac56fd6b961ca36b347ef63f514d11f7">ec_tempinbuf</a>, &amp;<a class="code" href="nicdrv_8c.html#aee8e5ba09644b6afe45d29196bb35684">ec_rxbuf</a>, &amp;<a class="code" href="nicdrv_8c.html#a42ace7330d26f97d4eac5ffed885127f">ec_rxbufstat</a>, &amp;<a class="code" href="nicdrv_8c.html#aa19c3326de729620b6da8d5870a37992">ec_rxsa</a>},
                 {&amp;<a class="code" href="nicdrv_8c.html#ad1438f8ed914dda0ad960f46568e1d31">sockhandle2</a>, &amp;<a class="code" href="nicdrv_8c.html#ad4c92ed6fc9b6c95768da08f36cbc14d">ec_txbuf</a>, &amp;<a class="code" href="nicdrv_8c.html#aaf1d250c85c451800940716aded3296e">ec_txbuflength</a>, &amp;<a class="code" href="nicdrv_8c.html#aa6cdab5fca8a7ea6ad85b55f2b9d46d8">ec_tempinbuf2</a>, &amp;<a class="code" href="nicdrv_8c.html#aefb9ae23af333e3e959b863ae32d0ac0">ec_rxbuf2</a>, &amp;<a class="code" href="nicdrv_8c.html#a3ae218506478dba61a06c5cf8ee21dd2">ec_rxbufstat2</a>, &amp;<a class="code" href="nicdrv_8c.html#a1453d31876c5b02ceda316068951e104">ec_rxsa2</a>}}
</pre></div><p>primary and secondary tx/rx stack pointers </p>

</div>
</div>
<a class="anchor" id="aac56fd6b961ca36b347ef63f514d11f7"></a><!-- doxytag: member="nicdrv.c::ec_tempinbuf" ref="aac56fd6b961ca36b347ef63f514d11f7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ethercattype_8h.html#a3a6f74b41ef7a243086b15cd91c05f69">ec_bufT</a> <a class="el" href="nicdrv_8c.html#aac56fd6b961ca36b347ef63f514d11f7">ec_tempinbuf</a><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>primary temporary rx buffer </p>

</div>
</div>
<a class="anchor" id="aa6cdab5fca8a7ea6ad85b55f2b9d46d8"></a><!-- doxytag: member="nicdrv.c::ec_tempinbuf2" ref="aa6cdab5fca8a7ea6ad85b55f2b9d46d8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ethercattype_8h.html#a3a6f74b41ef7a243086b15cd91c05f69">ec_bufT</a> <a class="el" href="nicdrv_8c.html#aa6cdab5fca8a7ea6ad85b55f2b9d46d8">ec_tempinbuf2</a><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>secondary temporary rx buffer </p>

</div>
</div>
<a class="anchor" id="a09b0c22126275c5459652b655ae6804f"></a><!-- doxytag: member="nicdrv.c::ec_tempinbufs" ref="a09b0c22126275c5459652b655ae6804f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="nicdrv_8c.html#a09b0c22126275c5459652b655ae6804f">ec_tempinbufs</a><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>primary temporary rx buffer status </p>

</div>
</div>
<a class="anchor" id="abdddc9e77d65cb9d8839898018c1188f"></a><!-- doxytag: member="nicdrv.c::ec_tx_mutex" ref="abdddc9e77d65cb9d8839898018c1188f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pthread_mutex_t <a class="el" href="nicdrv_8c.html#abdddc9e77d65cb9d8839898018c1188f">ec_tx_mutex</a> = PTHREAD_MUTEX_INITIALIZER</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ad4c92ed6fc9b6c95768da08f36cbc14d"></a><!-- doxytag: member="nicdrv.c::ec_txbuf" ref="ad4c92ed6fc9b6c95768da08f36cbc14d" args="[EC_MAXBUF]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ethercattype_8h.html#a3a6f74b41ef7a243086b15cd91c05f69">ec_bufT</a> <a class="el" href="nicdrv_8h.html#ad4c92ed6fc9b6c95768da08f36cbc14d">ec_txbuf</a>[EC_MAXBUF]</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>transmit buffers </p>

</div>
</div>
<a class="anchor" id="a041f8a9db37041e44f598beb671415cd"></a><!-- doxytag: member="nicdrv.c::ec_txbuf2" ref="a041f8a9db37041e44f598beb671415cd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ethercattype_8h.html#a3a6f74b41ef7a243086b15cd91c05f69">ec_bufT</a> <a class="el" href="nicdrv_8h.html#a041f8a9db37041e44f598beb671415cd">ec_txbuf2</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>temporary tx buffer </p>

</div>
</div>
<a class="anchor" id="aaf1d250c85c451800940716aded3296e"></a><!-- doxytag: member="nicdrv.c::ec_txbuflength" ref="aaf1d250c85c451800940716aded3296e" args="[EC_MAXBUF]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="nicdrv_8h.html#aaf1d250c85c451800940716aded3296e">ec_txbuflength</a>[EC_MAXBUF]</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>transmit buffer lenghts </p>

</div>
</div>
<a class="anchor" id="a3ef78e050890fa525fd62c00b7bf4e7b"></a><!-- doxytag: member="nicdrv.c::ec_txbuflength2" ref="a3ef78e050890fa525fd62c00b7bf4e7b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="nicdrv_8h.html#a3ef78e050890fa525fd62c00b7bf4e7b">ec_txbuflength2</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>temporary tx buffer length </p>

</div>
</div>
<a class="anchor" id="a4d3e965b1b72e65dd14f6ac9b745433b"></a><!-- doxytag: member="nicdrv.c::hlp_rxtime" ref="a4d3e965b1b72e65dd14f6ac9b745433b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="nicdrv_8h.html#a4d3e965b1b72e65dd14f6ac9b745433b">hlp_rxtime</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>global helper var ri count time used in rx socket </p>

</div>
</div>
<a class="anchor" id="ad7063eb4d29a8653fe75bb8662849e35"></a><!-- doxytag: member="nicdrv.c::hlp_txtime" ref="ad7063eb4d29a8653fe75bb8662849e35" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="nicdrv_8h.html#ad7063eb4d29a8653fe75bb8662849e35">hlp_txtime</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>global helper var to count time used in tx socket </p>

</div>
</div>
<a class="anchor" id="ad64f7787490ee767f77ad78021dd6bbd"></a><!-- doxytag: member="nicdrv.c::priMAC" ref="ad64f7787490ee767f77ad78021dd6bbd" args="[3]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="ethercattype_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> <a class="el" href="nicdrv_8h.html#ad64f7787490ee767f77ad78021dd6bbd">priMAC</a>[3] = { 0x0101, 0x0101, 0x0101 }</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Primary source MAC address used for EtherCAT. This address is not the MAC address used from the NIC. EtherCAT does not care about MAC addressing, but it is used here to differentiate the route the packet traverses through the EtherCAT segment. This is needed to find out the packet flow in redundant configurations. </p>

</div>
</div>
<a class="anchor" id="a1a8704686fbf15b235836459e6d82ebe"></a><!-- doxytag: member="nicdrv.c::secMAC" ref="a1a8704686fbf15b235836459e6d82ebe" args="[3]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="ethercattype_8h.html#a05f6b0ae8f6a6e135b0e290c25fe0e4e">uint16</a> <a class="el" href="nicdrv_8h.html#a1a8704686fbf15b235836459e6d82ebe">secMAC</a>[3] = { 0x0404, 0x0404, 0x0404 }</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Secondary source MAC address used for EtherCAT. </p>

</div>
</div>
<a class="anchor" id="a97f56dc60b8e1cacda490bb696c69599"></a><!-- doxytag: member="nicdrv.c::sockhandle" ref="a97f56dc60b8e1cacda490bb696c69599" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="nicdrv_8h.html#a97f56dc60b8e1cacda490bb696c69599">sockhandle</a> = -1</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>primary socket handle </p>

</div>
</div>
<a class="anchor" id="ad1438f8ed914dda0ad960f46568e1d31"></a><!-- doxytag: member="nicdrv.c::sockhandle2" ref="ad1438f8ed914dda0ad960f46568e1d31" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="nicdrv_8h.html#ad1438f8ed914dda0ad960f46568e1d31">sockhandle2</a> = -1</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>secondary socket handle </p>

</div>
</div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Mon Jun 13 2011 17:51:14 for SOEM by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </small></address>
</body>
</html>
